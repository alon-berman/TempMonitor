{% extends 'base.html' %}

{% block content %}

<div class="container-contact100">
    <div class="wrap-contact100">
        <form class="contact100-form validate-form" method="POST" action="/search_blocked_user">
            <span class="contact100-form-title">
                <p class="contact100-form" style="font-weight: normal; font-size: 100%">Welcome Back,</p> {{ user }}!
            </span>

            {% with messages = get_flashed_messages() %}
            {% if messages is not none %}
            <div class="label-error100">
                {% for message in messages %}
                {% if message|string != "None" %}
                {{ message }}
                {% endif %}
                {% endfor %}
            </div>
            {% endif %}
            {% endwith %}

            <div class="wrap-input100 validate-input" data-validate="Name is required">
<!--                <span class="label-input100">Enter the blocked car number</span>-->
                <input class="input100" type="number" pattern="[0-9]*" placeholder="Enter Blocked Car Plate Number"
                       name="BlockedCarNum"
                       id="BlockedCarNum" value={{unknown_plate}}>
                <span class="focus-input100"></span>
            </div>

            <div class="container-contact100-form-btn">
                <!--                    <a href="#myModal" class="trigger-btn" data-toggle="modal">-->
                <div class="wrap-contact100-form-btn">
                    <div class="contact100-form-bgbtn"></div>
                    <button class="contact100-form-btn" name="notify">
                        <span>
                            Notify Blocked Car Owner
                            <i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
                        </span>
                    </button>
                </div>
                <!--                    </a>-->
            </div>
            {% if unknown_plate %}
            <div class="container-contact100-form-btn">
                <div class="wrap-contact100-form-btn">
                    <div class="contact100-form-bgbtn"></div>
                    <button class="contact100-form-btn" name="report_unregistered_car">
                        <span>
                            Report Unregistered Car
                            <i class="fa fa-long-arrow-right m-l-7" aria-hidden="true"></i>
                        </span>
                    </button>
                </div>
            </div>
            {% endif %}
            <a href="{{ url_for('auth.login') }}">
                <button class="btn main-btn" type="submit" name="goto_login_page">Go to login page</button>
            </a>
        </form>

    </div>
</div>


<div id="myModal" class="modal fade">
    <div class="modal-dialog modal-confirm">
        <div class="modal-content">
            <div class="modal-header">
                <div class="icon-box">
                    <i class="material-icons">&#xE876;</i>
                </div>
                <h4 class="modal-title">Awesome!</h4>
            </div>
            <div class="modal-body">
                <p class="text-center">Thanks for the update, an Email sent to the car owner.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-success btn-block" data-dismiss="modal">OK</button>
            </div>
        </div>
    </div>
</div>

{% if notify_flag %}
<script>
        $("#myModal").modal()

</script>
{% endif %}

<script>
function getParam(name)
{
    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"), results = regex.exec(location.search);
    return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
}
Webflow.push(function() {

  // Auto-populate form fields (text fields only) based on query string
  // For non-text fields like dropdown/radio/checkbox, please contact me for custom development (http://webflowexpert.com)
  $('input:text, input[type=email]').each(function() {
    var paramValue = getParam(this.id);
    if(this.value == "" && paramValue != "") this.value = paramValue;
  });

});



</script>

{% endblock %}
